\documentclass{article}
\usepackage{enumerate}
\begin{document}
\begin{enumerate}
\item
\begin{enumerate}[A]
\item
\begin{eqnarray}
f(\beta)&=&(y-X\beta)^TW(y-X\beta)\nonumber\\
&=&\beta^TX^TWX\beta-2y^TWX\beta+\cdots\nonumber\\
&=&\beta^T X^TWX\beta-2y^TW^TX^T(X^TWX)^{-1}X^TWX\beta+\cdots\nonumber\\
&=&(\beta-(X^TWX)^{-1}X^TWy)^TX^TWX(\beta-(X^TWX)^{-1}X^TWy)+\cdots
\end{eqnarray}
\end{enumerate}
\item
\begin{enumerate}[A]
\item
\begin{eqnarray}
l(\beta)&=&-\log(\prod_i(y_i\omega_i(\beta)+(1-y_i)(1-\omega_i(\beta))))\nonumber\\
&=&-\sum_i\log((2y_i-1)\omega_i(\beta)+(1-y_i))
\end{eqnarray}
\[
\frac{\partial\omega_i}{\partial\beta_j}=\frac{x_{ij}\exp(-x_i\beta)}{(1+\exp(-x_i\beta))^2}=x_{ij}\omega_i(1-\omega_i)
\]
\[
\frac{\partial l}{\partial\beta_j}=\sum_i\frac{x_{ij}\omega_i(1-\omega_i)(2y_i-1)}{(2y_i-1)\omega_i+(1-y_i)}
\]
\item
See code.
\item
Write down the taylor expansion of $l$:
\[
l(\beta)=l(\beta_0)+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\beta_j+\frac{1}{2}\sum_{jk}\frac{\partial^2l(\beta_0)}{\partial\beta_k\partial\beta_j}\beta_j\beta_k+\cdots
\]
Compute second order derivative:
\begin{eqnarray}
\frac{\partial^2 l}{\partial\beta_k\partial\beta_j}&=&\sum_i\frac{x_{ij}(1-2\omega_i)x_{ik}\omega_i(1-\omega_i)((2y_i-1)\omega_i+(1-y_i))-(2y_i-1)^2x_{ik}x_{ij}\omega_i^2(1-\omega_i)^2}{((2y_i-1)\omega_i+(1-y_i))^2}\nonumber\\
&=&x_{ij}x_{ik}w_{ii}
\end{eqnarray}
\[
w_{ii}=\omega_i(1-\omega_i)\frac{(1-2\omega_i)((2y_i-1)\omega_i+(1-y_i))-(2y_i-1)^2\omega_i(1-\omega_i)}{((2y_i-1)\omega_i+(1-y_i))^2}
\]
$l$ can be written as a quadratic form of diagonal matrix $W$
\begin{eqnarray}
l(\beta)&=&l(\beta_0)+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\beta_j+\frac{1}{2}\sum_{jk}x_{ij}x_{ik}f_i(\beta_0)\beta_j\beta_k+\cdots\nonumber\\
&=&\frac{1}{2}\beta^TX^TWX\beta+\sum_j\frac{\partial l(\beta_0)}{\partial\beta_j}\beta_j+\cdots\nonumber\\
&=&(z-X\beta)^TW(z-X\beta)+\cdots
\end{eqnarray}
Determine $z$:
\begin{eqnarray}
z^TWX&=&\frac{\partial l(\beta_0)}{\partial\beta_i}\nonumber\\
\sum_iz_iw_{ii}x_{ij}&=&\sum_i\frac{x_{ij}\omega_i(\beta_0)(1-\omega_i(\beta_0))(2y_i-1)}{(2y_i-1)\omega_i(\beta_0)+(1-y_i)}\nonumber\\
z_i&=&\frac{\omega_i(\beta_0)(1-\omega_i(\beta_0))(2y_i-1)}{((2y_i-1)\omega_i(\beta_0)+(1-y_i))w_{ii}}
\end{eqnarray}
\end{enumerate}
\end{enumerate}
\end{document}